(import 'class/view/view.inc)

(defcvar 'window_border_size 4)

(def-bit)
	(bit 'window_drag_left)
	(bit 'window_drag_right)
	(bit 'window_drag_top)
	(bit 'window_drag_bottom)
(def-bit-end)

(def-bit)
	(bit 'window_flag_status)
	(bit 'window_flag_close)
	(bit 'window_flag_max)
	(bit 'window_flag_min)
(def-bit-end)

(def-class 'window 'view)
(def-method 'new 'class/window/new)
(def-method 'create 'class/window/create 'static '(r0))
(def-method 'init 'class/window/init 'static '(r0 r1 r2))
(def-method 'set_title 'class/window/set_title 'static '(r0 r1))
(def-method 'set_status 'class/window/set_status 'static '(r0 r1))
(def-method 'connect_close 'class/window/connect_close 'static '(r0 r1 r2))
(def-method 'connect_max 'class/window/connect_max 'static '(r0 r1 r2))
(def-method 'connect_min 'class/window/connect_min 'static '(r0 r1 r2))

(def-method 'deinit 'class/window/deinit 'final)
(def-method 'add_child 'class/window/add_child 'final)
(def-method 'pref_size 'class/window/pref_size 'final)
(def-method 'layout 'class/window/layout 'final)
(def-method 'draw 'class/window/draw 'final)
(def-method 'mouse_down 'class/window/mouse_down 'final)
(def-method 'mouse_move 'class/window/mouse_move 'final)

(def-struct 'window 'view)
	(offset 'window_start)
	(ptr 'window_border)
	(ptr 'window_title)
	(ptr 'window_status)
	(ptr 'window_flow)
	(ptr 'window_panel)
	(ptr 'window_close)
	(ptr 'window_max)
	(ptr 'window_min)
	(int 'window_offset_x)
	(int 'window_offset_y)
	(ulong 'window_drag_mode)
(def-struct-end)
