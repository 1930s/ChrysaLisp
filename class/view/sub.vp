(import 'inc/func.inc)
(import 'class/class_view.inc)

(def-func 'class/view/sub)
	;inputs
	;r0 = object
	;trashes
	;r1-r2

	;test parent
	(vp-cpy-ir r0 view_parent r1)
	if r1, !=, 0
		;clear parent field
		(vp-xor-rr r2 r2)
		(vp-cpy-ri r2 r0 view_parent)

		;remove from parent list
		(vp-lea-ir r0 view_node r2)
		(ln-remove-node r2 r1)
	endif
	(vp-ret)

(def-func-end)
