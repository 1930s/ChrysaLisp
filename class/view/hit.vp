(import 'inc/func.inc)
(import 'class/class_view.inc)

(def-func 'class/view/hit)
	;inputs
	;r0 = view object
	;r8 = x
	;r9 = y
	;outputs
	;r0 = view object
	;r1 = 0 if not, else hit

	(vpif '(r8 >= 0))
		(vpif '(r9 >= 0))
			(vpif '(r8 < [ r0 + view_w ]))
				(vpif '(r9 < [ r0 + view_h ]))
					;hit ?
					(vp-cpy-ir r0 view_flags r1)
					(vp-and-cr view_flag_solid r1)
					(vp-ret)
				(endif)
			(endif)
		(endif)
	(endif)
	(vp-xor-rr r1 r1)
	(vp-ret)

(def-func-end)
