(import 'test.inc)

(def-func 'test1)

	(def-struct 'local)
		(ptr 'local_inst)
		(ulong 'local_v1 'local_v2)
	(def-struct-end)

	(vp-sub-cr local_size r4)
	(vp-cpy-ri r0 r4 local_v1)
	(vp-cpy-ri r1 r4 local_v2)

	(vp-push r0 r1 r2)
	(fn-string "Test String" r9)
	(fn-string "Test String" r10)
	(fn-string "Another String" r11)
	(vp-pop r0 r1 r2)

	(fn-bind 'sys/task_start r12)
	(fn-bind 'sys/task_start r13)
	(fn-bind 'sys/task_stop r14)
	(fn-call 'sys/task_stop)
	(fn-jmp 'sys/task_start)

	(vp-cpy-ir r4 local_v1 r0)
	(vp-cpy-ir r4 local_v2 r1)
	(vp-add-cr local_size r4)
	(vp-ret)

(def-func-end)
