(import 'inc/func.inc)
(import 'inc/list.inc)
(import 'inc/task.inc)

(def-func 'sys/task_resume)
	;inputs
	;r0 = task control node (to resume)
	;trashes
	;r1-r2

	;are we in suspend state ?
	(vp-cpy-ir r0 r1)
	(vpif '(r1 == 0))
		;add to task list
		(f-bind 'sys_task 'statics r1)
		(vp-cpy-ir r1 tk_statics_current_tcb r1)
		(ln-add-node-before r1 r0 r2)
	(endif)
	(vp-ret)

(def-func-end)
