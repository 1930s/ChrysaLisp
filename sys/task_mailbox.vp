(import 'inc/func.inc)
(import 'inc/task.inc)

(def-func 'sys/task_mailbox)
	;outputs
	;r0, r1 = current task mailbox id

	(f-bind 'sys_task 'statics r0)
	(vp-cpy-ir r0 tk_statics_cpu_id r1)
	(vp-cpy-ir r0 tk_statics_current_tcb r0)
	(vp-add-cr tk_node_mailbox r0)
	(vp-ret)

(def-func-end)
