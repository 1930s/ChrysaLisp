(import 'inc/func.inc)
(import 'inc/load.inc)

(def-func 'sys/load_deinit)
	;get statics
	(f-bind 'sys_load 'statics r0)

	;free all function blocks
	(loop-flist-forward r0 ld_statics_block_flist r1 r2)
		(vp-cpy-rr r1 r0)
		(ln-remove-fnode r1 r2)
		(sys-munmap r0 ld_block_size)
	(loop-end)
	(vp-ret)

(def-func-end)
